{"version":3,"file":"http.es5.js","sources":["~/@ngx-loading-bar/http/src/http.ts","~/@ngx-loading-bar/http/src/http.module.ts","~/@ngx-loading-bar/http/src/loading-bar.http.ts"],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport {LoadingBarHttpModule,LoadingBarHttp} from './index';\n\nexport {httpFactory as Éµa} from './http.module';","import { NgModule } from '@angular/core';\nimport { HttpModule, Http, XHRBackend, RequestOptions } from '@angular/http';\nimport { LoadingBarModule, LoadingBarService } from '@ngx-loading-bar/core';\nimport { LoadingBarHttp } from './loading-bar.http';\n/**\n * @param {?} xhrBackend\n * @param {?} requestOptions\n * @param {?} loadingBarService\n * @return {?}\n */\nexport function httpFactory(xhrBackend: XHRBackend, requestOptions: RequestOptions, loadingBarService: LoadingBarService): Http {\n  return new LoadingBarHttp(xhrBackend, requestOptions, loadingBarService);\n}\nexport class LoadingBarHttpModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  imports: [\n    HttpModule,\n    LoadingBarModule.forRoot(),\n  ],\n  exports: [\n    HttpModule,\n    LoadingBarModule,\n  ],\n  providers: [\n    { provide: Http, useFactory: httpFactory, deps: [XHRBackend, RequestOptions, LoadingBarService] },\n  ],\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction LoadingBarHttpModule_tsickle_Closure_declarations() {\n/** @type {?} */\nLoadingBarHttpModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nLoadingBarHttpModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { LoadingBarService } from '@ngx-loading-bar/core';\nimport { Injectable } from '@angular/core';\nimport { ConnectionBackend, Http, Request, RequestOptions, RequestOptionsArgs, Response } from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport { _do } from 'rxjs/operator/do';\nimport { _finally } from 'rxjs/operator/finally';\n\nexport interface LoadingBarRequestOptionsArgs extends RequestOptionsArgs {\n  ignoreLoadingBar?: boolean;\n}\nexport class LoadingBarHttp extends Http {\n/**\n * @param {?} _backend\n * @param {?} _defaultOptions\n * @param {?} loadingBar\n */\nconstructor(_backend: ConnectionBackend, _defaultOptions: RequestOptions,\nprivate loadingBar: LoadingBarService) {\n    super(_backend, _defaultOptions);\n  }\n/**\n * @param {?} url\n * @param {?=} options\n * @return {?}\n */\nrequest(url: string | Request, options?: LoadingBarRequestOptionsArgs): Observable<Response> {\n    let /** @type {?} */ headers = options && options.headers;\n    if (!headers && url && ( /** @type {?} */((<Request> url))).headers) {\n      headers = ( /** @type {?} */((<Request> url))).headers;\n    }\n\n    if (headers && headers.has('ignoreLoadingBar')) {\n      headers.delete('ignoreLoadingBar');\n\n      return super.request(url, options);\n    }\n\n    const /** @type {?} */ response$ = super.request(url, options);\n    if (options && options.ignoreLoadingBar === true) {\n      return response$;\n    }\n\n    let /** @type {?} */ started = false;\n    const /** @type {?} */ responseSubscribe = response$.subscribe.bind(response$);\n    response$.subscribe = (...args) => {\n      this.loadingBar.start();\n      started = true;\n      return responseSubscribe(...args);\n    };\n\n    return _finally.call(response$, () => started && this.loadingBar.complete()\n    );\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ConnectionBackend, },\n{type: RequestOptions, },\n{type: LoadingBarService, },\n];\n}\n\nfunction LoadingBarHttp_tsickle_Closure_declarations() {\n/** @type {?} */\nLoadingBarHttp.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nLoadingBarHttp.ctorParameters;\n/** @type {?} */\nLoadingBarHttp.prototype.loadingBar;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["_finally"],"mappings":";;;;;;;;;;;;;;AEUA;IAEC,kCAAA;;;;;;IAID,wBAHG,QAAqB,EAAmB,eAAiB,EAAwB,UAAY;QAGhG,YAEI,kBAAM,QAAQ,EAAE,eAAe,CAAC,SACjC;QANiF,KAApF,CAAA,UAAoF,GAAA,UAAA,CAAY;;IAMhG,CAAG;;;;;;IAMH,gCARG,GAQH,UARG,GAAA,EAAA,OAAA;QAQH,iBA2BG;QA1BC,IAAJ,gBAAA,CARQ,OAAA,GAAU,OAAA,IAAW,OAAA,CAAQ,OAAC,CAAO;QASzC,EAAJ,CAAA,CAAQ,CARC,OAAC,IAAU,GAAA,IAAO,CAQ3B,CARsC,GAAA,CAQtC,CAAA,CAR2C,OAAC,CAQ5C,CARoD,CAQpD;YACM,OAAO,GARG,CAQhB,CAR2B,GAAA,CAQ3B,CAAA,CARgC,OAAC,CAAO;QASxC,CAAK;QAED,EAAJ,CAAA,CAAQ,OARC,IAAU,OAAA,CAAQ,GAAC,CAAG,kBAAC,CAAkB,CAQlD,CARoD,CAQpD;YACM,OAAO,CARC,MAAC,CAAM,kBAAC,CAAkB,CAAC;YAUnC,MAAN,CARa,iBAAM,OAAC,YAAO,GAAC,EAAI,OAAA,CAAQ,CAAC;QASzC,CAAK;QAED,IAAJ,gBAAA,CARU,SAAA,GAAY,iBAAM,OAAC,YAAO,GAAC,EAAI,OAAA,CAAQ,CAAC;QAS9C,EAAJ,CAAA,CAAQ,OARC,IAAU,OAAA,CAAQ,gBAAC,KAAoB,IAAA,CAQhD,CARsD,CAQtD;YACM,MAAN,CARa,SAAA,CAAU;QASvB,CAAK;QAED,IAAJ,gBAAA,CARQ,OAAA,GAAU,KAAA,CAAM;QASpB,IAAJ,gBAAA,CARU,iBAAA,GAAoB,SAAA,CAAU,SAAC,CAAS,IAAC,CAAI,SAAC,CAAS,CAAC;QAS9D,SAAS,CARC,SAAC,GAAW;YAAA,cAAK;iBAAL,UAAK,EAAL,qBAAK,EAAL,IAAK;gBAAL,yBAAK;;YASzB,KAAI,CARC,UAAC,CAAU,KAAC,EAAK,CAAE;YASxB,OAAO,GARG,IAAA,CAAK;YASf,MAAN,CARa,iBAAA,eAAmB,IAAG,EAAK;QASxC,CAAK,CARC;QAUF,MAAJ,CARWA,UAAA,CAAS,IAAC,CAAI,SAAC,EAAU,cAAM,OAAA,OAAA,IAAW,KAAA,CAAK,UAAC,CAAU,QAAC,EAAQ,EAApC,CAAoC,CASzE,CARC;IASN,CAAG;;CA1CH,CAEC,IAAA;AAiCM,cAAP,CAAA,UAAO,GAAoC;IAS3C,EARE,IAAA,EAAM,UAAA,EAAW;CASlB,CARC;;;;AAED,cAAD,CAAA,cAAC,GAAA,cAAA,OAAA;IAWD,EAAC,IAAI,EAAE,iBAAiB,GAAG;IAC3B,EAAC,IAAI,EAAE,cAAc,GAAG;IACxB,EAAC,IAAI,EAAE,iBAAiB,GAAG;CAC1B,EAdA,CAcA,CAAC;AD3DF;;;;;;AAMA,qBALC,UAAA,EAAA,cAAA,EAAA,iBAAA;IAMC,MAAF,CALS,IAAI,cAAA,CAAe,UAAC,EAAW,cAAA,EAAgB,iBAAA,CAAkB,CAAC;AAM3E,CAAC;AACD;IAAA;;;CAAA;AAH0C,oBAA1C,CAAA,UAA0C,GAAoC;IAI9E,EAHE,IAAA,EAAM,QAAA,EAAU,IAAA,EAAM,CAAA;gBAItB,OAAO,EAHE;oBAIP,UAAU;oBACV,gBAAgB,CAHC,OAAC,EAAO;iBAI1B;gBACD,OAAO,EAHE;oBAIP,UAAU;oBACV,gBAAgB;iBACjB;gBACD,SAAS,EAHE;oBAIT,EAHE,OAAA,EAAS,IAAA,EAAM,UAAA,EAAY,WAAA,EAAa,IAAA,EAAM,CAAA,UAAE,EAAW,cAAA,EAAgB,iBAAA,CAAkB,EAAC;iBAIjG;aACF,EAHC,EAAG;CAIJ,CAHC;;;;AAED,oBAAD,CAAA,cAAC,GAAA,cAAA,OAAA,EAMA,EANA,CAMA,CAAC;ADhCF;;GAEG;"}