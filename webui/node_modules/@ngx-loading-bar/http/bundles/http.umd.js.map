{"version":3,"file":"http.umd.js","sources":["~/@ngx-loading-bar/http/src/http.module.ts","~/@ngx-loading-bar/http/src/loading-bar.http.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { HttpModule, Http, XHRBackend, RequestOptions } from '@angular/http';\nimport { LoadingBarModule, LoadingBarService } from '@ngx-loading-bar/core';\nimport { LoadingBarHttp } from './loading-bar.http';\n/**\n * @param {?} xhrBackend\n * @param {?} requestOptions\n * @param {?} loadingBarService\n * @return {?}\n */\nexport function httpFactory(xhrBackend: XHRBackend, requestOptions: RequestOptions, loadingBarService: LoadingBarService): Http {\n  return new LoadingBarHttp(xhrBackend, requestOptions, loadingBarService);\n}\nexport class LoadingBarHttpModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  imports: [\n    HttpModule,\n    LoadingBarModule.forRoot(),\n  ],\n  exports: [\n    HttpModule,\n    LoadingBarModule,\n  ],\n  providers: [\n    { provide: Http, useFactory: httpFactory, deps: [XHRBackend, RequestOptions, LoadingBarService] },\n  ],\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction LoadingBarHttpModule_tsickle_Closure_declarations() {\n/** @type {?} */\nLoadingBarHttpModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nLoadingBarHttpModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { LoadingBarService } from '@ngx-loading-bar/core';\nimport { Injectable } from '@angular/core';\nimport { ConnectionBackend, Http, Request, RequestOptions, RequestOptionsArgs, Response } from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport { _do } from 'rxjs/operator/do';\nimport { _finally } from 'rxjs/operator/finally';\n\nexport interface LoadingBarRequestOptionsArgs extends RequestOptionsArgs {\n  ignoreLoadingBar?: boolean;\n}\nexport class LoadingBarHttp extends Http {\n/**\n * @param {?} _backend\n * @param {?} _defaultOptions\n * @param {?} loadingBar\n */\nconstructor(_backend: ConnectionBackend, _defaultOptions: RequestOptions,\nprivate loadingBar: LoadingBarService) {\n    super(_backend, _defaultOptions);\n  }\n/**\n * @param {?} url\n * @param {?=} options\n * @return {?}\n */\nrequest(url: string | Request, options?: LoadingBarRequestOptionsArgs): Observable<Response> {\n    let /** @type {?} */ headers = options && options.headers;\n    if (!headers && url && ( /** @type {?} */((<Request> url))).headers) {\n      headers = ( /** @type {?} */((<Request> url))).headers;\n    }\n\n    if (headers && headers.has('ignoreLoadingBar')) {\n      headers.delete('ignoreLoadingBar');\n\n      return super.request(url, options);\n    }\n\n    const /** @type {?} */ response$ = super.request(url, options);\n    if (options && options.ignoreLoadingBar === true) {\n      return response$;\n    }\n\n    let /** @type {?} */ started = false;\n    const /** @type {?} */ responseSubscribe = response$.subscribe.bind(response$);\n    response$.subscribe = (...args) => {\n      this.loadingBar.start();\n      started = true;\n      return responseSubscribe(...args);\n    };\n\n    return _finally.call(response$, () => started && this.loadingBar.complete()\n    );\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ConnectionBackend, },\n{type: RequestOptions, },\n{type: LoadingBarService, },\n];\n}\n\nfunction LoadingBarHttp_tsickle_Closure_declarations() {\n/** @type {?} */\nLoadingBarHttp.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nLoadingBarHttp.ctorParameters;\n/** @type {?} */\nLoadingBarHttp.prototype.loadingBar;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["Http","XHRBackend","RequestOptions","LoadingBarService","LoadingBarModule","HttpModule","NgModule","ConnectionBackend","Injectable","_finally"],"mappings":"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"}