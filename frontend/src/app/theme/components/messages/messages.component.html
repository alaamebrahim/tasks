<button mat-icon-button [matMenuTriggerFor]="messagesMenu" (click)="openMessagesMenu()">
    <mat-icon>notifications</mat-icon>
</button>
<mat-menu #messagesMenu="matMenu" [overlapTrigger]="false" class="toolbar-dropdown-menu messages">
    <!--<span (mouseleave)="onMouseLeave()">-->
    <mat-tab-group backgroundColor="primary" (click)="stopClickPropagate($event)" [selectedIndex]="selectedTab">
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon>message</mat-icon>
            </ng-template>
            <mat-card class="content" perfectScrollbar>
                <div fxLayout="column" fxLayoutAlign="none">
                    <button mat-button *ngFor="let message of messages">
                        <div fxLayout="column" fxLayoutAlign="none" class="w-100">
                            <div fxLayout="row" fxLayoutAlign="space-between start">
                                <span class="name">
                                    <small>{{message.text | slice:0:50}}</small>
                                </span>
                            </div>
                            <span class="info">
                                <mat-icon>access_time</mat-icon> {{message.created_at | date:'dd MM yyy'}}</span>
                        </div>
                    </button>
                </div>
            </mat-card>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon>mail</mat-icon>
            </ng-template>
            <mat-card class="content" perfectScrollbar>
                <div fxLayout="column" fxLayoutAlign="none">
                    <button mat-button *ngFor="let mail of mailbox">
                        <div fxLayout="column" fxLayoutAlign="center center" class="row-1">
                            <span class="name">{{mail.created_at | date:"dd"}}</span>
                            <span class="name">{{mail.created_at |date:"yyyy/MM"}}</span>
                        </div>
                        <div fxLayout="column" fxLayoutAlign="none">
                            <span class="name">{{mail.subject | slice:0:50}}</span>
                            <span class="text muted-text">{{mail.sender.first_name + ' ' + mail.sender.last_name | slice:0:50}}</span>
                        </div>
                    </button>
                </div>
            </mat-card>
        </mat-tab>
    </mat-tab-group>
    <!--</span>-->
</mat-menu>